<VirtualHost *:80>
    ServerName localhost
    DocumentRoot /opt/render/project/src/public

    <Directory /opt/render/project/src/public/>
        DirectoryIndex index.html
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

# Rewrite all non-file requests to index.html (for SPA or clean URLs)
  RewriteEngine On

# Ignore API requests (don't rewrite them to index.html)
RewriteCond %{REQUEST_URI} !^/api/ 

# Rewrite everything else to index.html (for SPAs)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ /index.html [QSA,L]

    # Logging
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>